# 🎯 事件监控系统测试指南

## 快速开始

### 1. 启动应用
```bash
npm run dev
```

### 2. 选择 Demo Mode
- 在主菜单选择"本地演示模式"
- 不需要配置 API 地址

### 3. 开始游戏
- 点击"开始游戏"按钮

---

## 🔍 验证清单

### ✅ 步骤 1: 检查 EventMonitor 显示
在应用主界面，你应该看到：
- [ ] 在 Dashboard 和 Terminal 之间出现新的"🎯 事件跟踪"面板
- [ ] 显示"3 个活跃"的事件统计
- [ ] 可以看到以下 3 个事件：
  - [ ] 量子计算研究项目 (0/5 ▮░░░░░░░░░░ 0%)
  - [ ] 融资谈判 (0/3 ▮░░░░░░░░ 0%)
  - [ ] 团队重组培训 (0/4 ▮░░░░░░░░░ 0%)

### ✅ 步骤 2: 执行第一个操作
1. 在 InputArea 中选择一个选项
2. 点击"执行"按钮
3. 观察 EventMonitor 面板

**预期结果**：
- [ ] 3 个事件的进度都增加 1
- [ ] 进度条向前推进
- [ ] Terminal 中显示事件进度信息

**示例输出**：
```
[进行中] 量子计算研究项目：进度 1/5
[进行中] 融资谈判：进度 1/3
[进行中] 团队重组培训：进度 1/4
```

### ✅ 步骤 3: 重复执行直到事件完成

执行约 3 次操作：

**执行 3 次后预期结果**：
- [ ] "融资谈判"应该显示 3/3（100% 完成）
- [ ] "融资谈判"从活跃事件移到已完成
- [ ] Terminal 显示完成提示

**示例完成提示**：
```
✅ 融资谈判已完成！成功获得融资，公司资金链得到缓解。
```

### ✅ 步骤 4: 继续执行直到所有事件完成

再执行 2 次操作：

**执行 5 次后预期结果**：
- [ ] "量子计算研究项目"完成 (5/5)
- [ ] "团队重组培训"完成 (4/4)
- [ ] EventMonitor 显示"0 个活跃"
- [ ] 所有事件都可以在"已完成"标签页中查看

### ✅ 步骤 5: 检查高级面板
点击 EventMonitor 面板中的"高级视图"按钮（如果有）：

- [ ] 可以切换"进行中"和"已完成"标签页
- [ ] "已完成"标签页显示所有 3 个已完成的事件
- [ ] 每个事件都显示完成时间

---

## 📊 事件进度表

| 事件 | 触发次数 | 完成进度 | 完成提示 |
|------|---------|--------|--------|
| 融资谈判 | 3 | 100% | ✅ 成功获得融资 |
| 团队重组培训 | 4 | 100% | ✅ 团队士气提升 |
| 量子计算研究项目 | 5 | 100% | ✅ 项目重大突破 |

---

## 🔧 调试技巧

### 打开浏览器开发者工具
1. 按 F12 打开控制台
2. 查看是否有错误信息

### 检查 eventManager 状态
在控制台输入：
```javascript
// 导入 eventManager（需要在应用中）
import { eventManager } from './src/engine/eventSystem.js'

// 查看活跃事件
console.log(eventManager.getActiveEvents())

// 查看完成事件
console.log(eventManager.getCompletedEvents())

// 查看完整摘要
console.log(eventManager.getEventSummary())
```

### 手动更新事件
在控制台输入：
```javascript
// 更新所有事件
const result = eventManager.updateEvents()
console.log('更新结果:', result)

// 查看完整摘要
console.log('当前摘要:', eventManager.getEventSummary())
```

---

## ❌ 常见问题

### Q1: EventMonitor 面板不显示？

**检查清单**：
1. [ ] 是否使用了 Demo Mode？
2. [ ] 游戏是否已正确初始化（gameState 不为空）？
3. [ ] 浏览器控制台是否有红色错误？
4. [ ] 是否刷新了页面？

**解决方案**：
- 清理浏览器缓存（Ctrl+Shift+Delete）
- 重新启动开发服务器（停止并重新运行 `npm run dev`）

### Q2: 事件不更新？

**检查清单**：
1. [ ] 定时器是否在运行？
2. [ ] EventMonitor 组件是否挂载？
3. [ ] eventManager 中是否有活跃事件？

**解决方案**：
- 在控制台查看 `eventManager.getEventSummary()`
- 检查是否有 JavaScript 错误

### Q3: 完成事件看不到？

**检查清单**：
1. [ ] 事件是否真的完成了（进度条是否显示 100%）？
2. [ ] 是否点击了"已完成"标签页？
3. [ ] 是否使用了 AdvancedEventPanel？

**解决方案**：
- 使用 AdvancedEventPanel（如果有的话）查看完成事件
- 继续执行操作使更多事件完成

---

## 💡 功能说明

### EventMonitor 组件功能

1. **简单监控面板**
   - 显示活跃事件总数
   - 显示已完成事件总数
   - 显示事件进度条

2. **事件卡片**
   - 事件名称
   - 进度百分比（数字和进度条）
   - 进度步骤指示器（小圆点表示每一回合）

3. **高级事件面板**（可选）
   - 分类标签页（进行中 / 已完成）
   - 详细事件信息
   - 事件 ID 和时间戳

### 事件系统集成

- **自动触发**：每次执行操作时，所有活跃事件的进度都会 +1
- **智能完成**：当事件进度达到 100% 时自动标记为完成
- **历史记录**：完成事件的提示信息会出现在 Terminal 中
- **系统提示**：完成事件会生成系统提示，注入到 AI 的上下文中

---

## 📝 文件修改总结

已修改的文件：
1. `src/App.jsx` - 添加了 EventMonitor 导入和渲染
2. `src/components/EventMonitor/EventMonitor.jsx` - 启用了实时更新
3. `src/engine/gameLogic.js` - 添加了演示事件初始化
4. `src/engine/eventSystem.js` - 无需修改（已完成）

所有修改都已验证，没有错误。

---

## 🎉 成功指标

系统完全正常工作时，你应该看到：

✅ EventMonitor 显示 3 个活跃事件
✅ 执行操作时进度条更新
✅ 完成事件时 Terminal 显示提示
✅ 切换标签页查看已完成事件
✅ 没有错误消息

**祝你测试愉快！** 🚀

